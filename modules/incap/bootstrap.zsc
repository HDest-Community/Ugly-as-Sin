class IncapInitialized : Inventory {}

class UaS_Incap_Bootstrap : EventHandler {
	override void PlayerEntered(PlayerEvent e) {
		PlayerInfo player = players[e.PlayerNumber];
		if(!player.mo) { return; } // The player might not have a PlayerPawn here
		Initialize(player);
	}

	override void PlayerRespawned(PlayerEvent e) {
		Initialize(players[e.PlayerNumber]);
	}

	void Initialize(PlayerInfo player) {
		if(UaS_IncapEnabled == true) {
			if(!player.mo.countinv("IncapInitialized")) {
				player.mo.giveinventory("UaS_Incap_Handler", 1);
			}
		}
		else {
			player.mo.TakeInventory("IncapInitialized", 1);
			player.mo.TakeInventory("UaS_Incap_Handler", 1);
		}
	}
}
